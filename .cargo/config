[target.thumbv7em-none-eabihf]
# From the release notes of the SoftDevice "The Firmware ID of this SoftDevice is"
runner = "probe-run --chip nRF52840_xxAA"

[build]
target = "thumbv7em-none-eabihf"
rustflags = [
  "-C", "link-arg=--nmagic",
  "-Z", "trap-unreachable=no",
  "-C", "link-arg=-Tlink.x",
  "-C", "link-arg=-Tdefmt.x",
]

[unstable]
# build.rs dependencies fix #5730
features = ["host_dep"]
# core requires rustup component add rust-src
# builds thumbv7em-none-eabihf instead of using prebuilt
build-std = ["core"]
# reduce panic bloat
build-std-features = ["panic_immediate_abort"]